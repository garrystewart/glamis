<!doctype html>
<html lang="en">

<head>
	<title>Gran Turismo Sport</title>
</head>

<body>
	<a href="index.htm">Back</a>
	<label for "sel-make">Make</label>
	<select id="sel-make">
		<option value="0">Please select</option>
	</select>
	<label for "sel-model">Model</label>
	<select id="sel-model">
		<option value="0">Please select</option>
	</select>
	<label for "sel-group">Group</label>
	<select id="sel-group">
		<option value="0">Please select</option>
	</select>
	<label for "sel-drivetrain">Drivetrain</label>
	<select id="sel-drivetrain">
		<option value="0">Please select</option>
	</select>
	<label for "ipt-hp">HP</label>
	<input type="number" id="ipt-hp">
	<label for "ipt-weight">Weight</label>
	<input type="number" id="ipt-weight">
	<label for "ipt-speed">Speed</label>
	<input type="number" id="ipt-speed">
	<label for "ipt-acceleration">Acceleration</label>
	<input type="number" id="ipt-acceleration">
	<label for "ipt-braking">Braking</label>
	<input type="number" id="ipt-braking">
	<label for "ipt-cornering">Cornering</label>
	<input type="number" id="ipt-cornering">
	<label for "ipt-stability">Stability</label>
	<input type="number" id="ipt-stability">
	<label for "ipt-credits">Credits</label>
	<input type="number" id="ipt-credits">
	<button id="btn-add">Add stats</button>
	<script src="../js/jquery-3.3.1.min.js"></script>
	<script src="../js/functions.js"></script>
	<script>
		$.getJSON('data/cars.json', function (cars) {
			console.log(cars);
			for (var make in cars){
				$('#sel-make').append('<option value="' + make + '">' + make + '</option>')
			}
			$('#btn-add').click(function () {
				// validation
				if ($('#sel-make').val() === '0') {
					alert('make not selected');
					return;
				}
				if (!$('#ipt-model').val()) {
					alert('model not entered');
					return;
				}
				// end of validation
				var data = {
					'make': $('#sel-make').val(),
					'model': $('#ipt-model').val()
				}
				$.post('asp/addModel.asp', {
					data: JSON.stringify(data)
				}, function () {
					alert('model added');
				}).fail(function (jqxhr) {
					ajaxFailAlert(jqxhr);
				});
			});
		}).fail(function (jqxhr) {
			if (jqxhr.status === 404) {
				alert('no makes found');
			} else {
				ajaxFailAlert(jqxhr);
			}
		});
	</script>
</body>

</html>